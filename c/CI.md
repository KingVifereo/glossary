
# CI

英文全称：Continuous Integration  
中文全称：持续集成

持续集成是一种软件开发实践，团队成员频繁将他们的工作成果集成在一起（通常每人每天至少提交一次，这样每天就会有多次集成）；每次提交后，自动触发运行一次包含自动化验证集的构建任务，以便能尽早发现集成问题。

## 持续集成的特点

1. 集成频率高，一天多次
1. 自动集成，无需人工干预
1. 集成结果有反馈：成功或失败

## 持续集成的一次执行流程

![04fc90551f3c07ad34c9f207911f78d3.jpg](https://img.liyunx.com/2020/04fc90551f3c07ad34c9f207911f78d3.jpg)

1. 开发人员将代码提交到代码仓库。
1. 持续集成服务器按一定的时间间隔（如每隔 1 分钟）对代码仓库进行轮询，发现有代码变更。
1. 持续集成服务器自动将最新代码检出到已准备好的专用服务器上（如果应用规模不大，可以与持续集成服务器是同一台机器）。
1. 在专用服务器上运行由持续集成服务器指定的构建脚本或命令，对最新代码进行检查（如代码静态扫描、编译打包、运行单元测试、部署并运行功能测试等）。
1. 运行结束后，将验证结果（成功或失败）反馈给开发团队。

## FAQ

**哪些类型的测试属于 CI 的范畴？**

首先可以明确的是，单元测试肯定属于 CI 的范畴。

其次从集成的范围来看：

（1）如果将持续集成理解为开发代码的集成，那 CI 到应用构建成功为止。  
（2）如果将持续集成理解为所有代码的集成，那么 CI 就包括任何自动化测试（如接口、UI、性能等），自动化测试一般在开发代码集成部署后运行。

通常情况下 CI 表示开发代码集成，但有时为了方便，我们也将非生产环境的自动化部署和自动化测试纳入到 CI 的范畴。

**CI 包括研发的哪些阶段？**

CI 包括构建阶段（代码检出、编译、单元测试、打包）是毫无争议的。

对于非生产环境的自动部署和自动化测试，有些文章中将其归为 [CD](c/CD.md)，有些文章中将其归为 CI，需要注意的是 CI 是 CD 的子集。

## 参考资料

1. [Continuous Integration](https://www.martinfowler.com/articles/continuousIntegration.html)
1. [乔梁，持续交付2.0 - 业务引领的DevOps精要[M].北京：人民邮电出版社，2019. P135](https://book.douban.com/subject/30419555/)
1. [什么是持续交付？](https://amazonaws-china.com/cn/devops/continuous-delivery/)
1. [测试人员在持续集成中的工作内容包含哪些？](https://www.cnblogs.com/yunxiao2016/p/5783943.html)